appId: com.example.trend_sdet
name: "Feature: Checkout Full Order"
tags:
  - feature
  - checkout
---
- runFlow: ../subflows/launch_app_clean.yaml

# Wait for content
- extendedWaitUntil:
    visible:
      id: "home_content"
    timeout: 15000

# Add first product to cart
- runFlow: ../subflows/add_first_product_to_cart.yaml

# Navigate to cart
- tapOn:
    id: "detail_back_button"
- extendedWaitUntil:
    visible:
      id: "home_screen"
    timeout: 10000
- runFlow: ../subflows/navigate_to_cart.yaml

# Wait for cart items
- extendedWaitUntil:
    visible:
      id: "cart_items_list"
    timeout: 15000

# Proceed to checkout
- tapOn:
    id: "cart_checkout_button"
- extendedWaitUntil:
    visible:
      id: "checkout_place_order_button"
    timeout: 15000

# Place order
- tapOn:
    id: "checkout_place_order_button"

# Assert processing state
- extendedWaitUntil:
    visible:
      id: "checkout_processing"
    timeout: 10000

# Assert success state
- extendedWaitUntil:
    visible:
      id: "checkout_success"
    timeout: 30000
- assertVisible:
    text: "Order Confirmed!"
- assertVisible:
    id: "checkout_order_number"
- assertVisible:
    id: "checkout_total_paid"

# Continue shopping returns to home
- tapOn:
    id: "checkout_continue_shopping_button"
- extendedWaitUntil:
    visible:
      id: "home_screen"
    timeout: 10000
